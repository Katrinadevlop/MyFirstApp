# Клиент для получения постов с авторами

## Описание задачи

Реализовано получение авторов для постов и комментариев. API разделено на отдельные эндпоинты:
- `/api/posts` - получение всех постов
- `/api/posts/{postId}/comments` - получение комментариев для поста
- `/api/authors/{id}` - получение автора по ID

## Реализация

Реализовано **два подхода**:

### 1. Последовательный подход (`PostRepository`)

Три варианта реализации:
- `getPostsWithAuthorsSequential()` - последовательное получение постов с авторами
- `getPostsWithAuthorsAndCommentsSequential()` - последовательное получение с комментариями и их авторами
- `getPostsWithAuthorsAndCommentsCached()` - оптимизированная версия с кэшированием авторов

### 2. Асинхронный подход (`PostRepositoryAsync`)

Три варианта с использованием корутин и async/await:
- `getPostsWithAuthorsAsync()` - параллельное получение постов с авторами
- `getPostsWithAuthorsAndCommentsAsync()` - параллельное получение с комментариями
- `getPostsWithAuthorsAndCommentsAsyncCached()` - оптимизированная версия с кэшированием

## Структура проекта

```
client/
├── build.gradle.kts
├── README.md
└── src/main/kotlin/ru/netology/nmedia/
    ├── Main.kt                           # Точка входа с демонстрацией
    ├── api/
    │   └── ApiService.kt                 # HTTP клиент для работы с API
    ├── dto/
    │   └── Models.kt                     # Модели данных
    └── repository/
        ├── PostRepository.kt             # Последовательная реализация
        └── PostRepositoryAsync.kt        # Асинхронная реализация
```

## Модели данных

- `Post` - пост с authorId
- `Comment` - комментарий с authorId
- `Author` - информация об авторе
- `PostWithAuthor` - пост с автором и комментариями
- `CommentWithAuthor` - комментарий с автором

## Технологии

- **Kotlin** - основной язык
- **OkHttp** - HTTP клиент
- **Gson** - JSON парсинг
- **Kotlin Coroutines** - асинхронное выполнение

## Запуск

1. Убедитесь, что сервер запущен на `localhost:9999`
2. Запустите клиентское приложение:

```bash
# Windows
.\gradlew :client:run

# macOS/Linux
./gradlew :client:run
```

## Что демонстрирует программа

Программа выполняет 6 различных подходов к получению данных и сравнивает их производительность:

1. Последовательный подход (без комментариев)
2. Последовательный подход (с комментариями)
3. Последовательный с кэшированием авторов
4. Асинхронный с async/await (без комментариев)
5. Асинхронный с async/await (с комментариями)
6. Асинхронный с кэшированием

В конце выводится сравнение производительности всех подходов.

## Преимущества асинхронного подхода

- Параллельное выполнение запросов к API
- Значительное сокращение времени выполнения
- Более эффективное использование ресурсов
- Кэширование позволяет избежать повторных запросов за одним и тем же автором
